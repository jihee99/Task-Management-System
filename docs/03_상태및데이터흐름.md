# 상태 및 데이터 흐름 설계서

## 1. 상태 분류 원칙

### 1.1 분류 기준

| 구분 | 기준 | 예시 |
| --- | --- | --- |
| **서버 상태 (Server State)** | API 응답 결과, 서버가 소유한 데이터 | 할 일 목록, 대시보드 수치, 사용자 정보 |
| **UI 상태 (Local/UI State)** | 입력값, 모달 열림 여부, 로딩/에러 표시 | 폼 입력값, 모달 open 여부 |
| **전역 상태 (Global State)** | 여러 페이지에서 공유되며 앱 전반에 영향 | 인증 토큰, 로그인 여부 |
| **파생 상태 (Derived State)** | 다른 상태에서 계산 가능한 값 | `isAuthenticated` = `!!accessToken` |

### 1.2 핵심 원칙

```
인증 상태 → 전역 상태
페이지 데이터 → 서버 상태 (페이지 스코프)
모달·입력값 → 로컬 UI 상태
```

> 사용자 흐름 문서에서 선언된 원칙을 그대로 적용
>

---

## 2. 전역 상태 설계

### 2.1 전역 상태로 관리해야 하는 것 (최소화)

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 | 저장 위치 |
| --- | --- | --- | --- | --- |
| `accessToken` | 서버 상태 (캐시) | ✅ | ✅ | localStorage 또는 메모리 |
| `refreshToken` | 서버 상태 (캐시) | ✅ | ✅ | localStorage 또는 메모리 |
| `isAuthenticated` | 파생 상태 | ✅ | ✅ | 메모리 (토큰에서 파생) |
| `redirectAfterLoginPath` | UI 상태 | ✅ | ⭕ 로그인 성공 시까지 | 메모리 또는 sessionStorage |

**전역 상태가 필요한 이유:**

- GNB 아이콘 분기 (로그인/회원정보)
- 보호된 라우트 접근 제어
- 401 발생 시 공통 리다이렉트 처리 (보호된 페이지에서만)
- 모든 API 요청 헤더에 토큰 포함

### 2.2 전역 상태 인터페이스

```
interface AuthState {
  accessToken: string | null;
  refreshToken: string | null;
  redirectAfterLoginPath: string | null;
}

interface AuthDerivedState {
  isAuthenticated: boolean; // !!accessToken
}

interface AuthActions {
  login: (tokens: { accessToken: string; refreshToken: string }) => void;
  logout: () => void;
  setRedirectPath: (path: string | null) => void;
  refreshTokens?: () => Promise<void>; // 선택적 구현
}
```

### 2.3 토큰 저장 위치 선택 가이드

| 옵션 | 장점 | 단점 | 권장 상황 |
|:-----|:-----|:-----|:----------|
| **localStorage** | 새로고침 후 유지, 구현 단순 | XSS 취약 | 일반적인 경우 |
| **메모리 (Context/Store)** | 보안 우수 | 새로고침 시 로그아웃 | 보안 중시 |
| **httpOnly Cookie** | 가장 안전 | 서버 설정 필요 | 명세 외 범위 |

### 2.4 전역 상태로 두면 복잡해지는 것

```
❌ task 목록 / 상세 데이터
❌ 대시보드 수치
❌ 회원정보 데이터
❌ 모든 모달 상태
❌ 입력 폼 값
```

---

## 3. 전역 로직 (상태는 아니지만 공통 처리)

### 3.1 401 에러 처리 (페이지별 차등 적용)

> 💡 **설계 결정**: 원본 명세에서 대시보드의 401 처리가 명시되지 않았으므로, 대시보드는 비로그인 사용자도 접근 가능한 랜딩 페이지로 활용한다. 보호된 페이지(`/task`, `/task/:id`, `/user`)는 명세에 따라 401 시 즉시 로그인 페이지로 리다이렉트한다.

#### 3.1.1 보호된 페이지 401 처리 (공통 로직)

```javascript
// Axios Interceptor 또는 API 클라이언트 레벨에서 일괄 처리
// 단, 대시보드 API는 별도 처리

api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      const currentPath = window.location.pathname;
      
      // 대시보드는 401 리다이렉트 제외 (랜딩 페이지)
      if (currentPath === '/') {
        return Promise.reject(error);
      }
      
      // 보호된 페이지: 즉시 리다이렉트
      authStore.setRedirectPath(currentPath);
      authStore.logout();
      navigate('/sign-in');
    }
    return Promise.reject(error);
  }
);
```

#### 3.1.2 대시보드 401 처리 (개별 처리)

대시보드에서는 401 발생 시 로그인 유도 UI를 표시한다.

```javascript
// DashboardPage.tsx
const { data, isLoading, error } = useDashboard();

if (error?.response?.status === 401) {
  return <LoginPromptUI />;  // 로그인 유도 UI
}

return <DashboardContent data={data} />;
```

### 3.2 토큰 자동 갱신 (선택적 구현)
```
┌─────────────────────────────────────────────────────────────┐
│  API 요청 → 401 응답 → RefreshToken으로 갱신 시도           │
│      │                                                      │
│      ├── 갱신 성공 → 새 토큰 저장 → 원래 요청 재시도        │
│      └── 갱신 실패 → 로그인 페이지로 리다이렉트             │
└─────────────────────────────────────────────────────────────┘
```

> 💡 명세에 /api/refresh API는 정의되어 있으나, 자동 갱신은 선택적 구현 사항


---

## 4. 페이지별 상태 설계

### 4.1 GNB/LNB

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| 로그인 여부에 따른 아이콘 | 파생 UI 상태 | ✅ (auth 참조) | ✅ |
| 활성 메뉴 (현재 route) | UI 상태 | ❌ (라우터 의존) | ❌ |

**설계 포인트:**

- GNB는 `isAuthenticated` 상태만 참조
- 활성 메뉴는 React Router의 `useLocation`에서 파생
- 비로그인 상태에서는 로그인 아이콘 표시, 클릭 시 `/sign-in`으로 이동
- 대시보드에서도 GNB가 표시되며, 비로그인 시 로그인 아이콘 표시

---

### 4.2 대시보드 (`/`) - 랜딩 페이지

> 💡 **설계 결정**: 대시보드는 비로그인 사용자도 접근 가능한 랜딩 페이지 역할을 한다. 401 응답 시 리다이렉트 없이 로그인 유도 UI를 표시한다.

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| `numOfTask` | 서버 상태 | ❌ | ❌ |
| `numOfRestTask` | 서버 상태 | ❌ | ❌ |
| `numOfDoneTask` | 서버 상태 | ❌ | ❌ |
| 로딩 상태 | UI 상태 | ❌ | ❌ |
| `isUnauthorized` | UI 상태 | ❌ | ❌ |

**설계 포인트:**

- 다른 페이지에서 재사용되지 않음
- 페이지 진입 시마다 최신 데이터 조회가 자연스러움
- **401 응답 시 로그인 유도 UI 표시 (리다이렉트 없음)**
- **페이지 단위 서버 상태 (Query 단위 관리)**


```javascript
// 권장 구현
const { data, isLoading, error } = useQuery({
  queryKey: ['dashboard'],
  queryFn: fetchDashboard,
  retry: false, // 401 시 재시도 방지
});

// 401 에러 시 로그인 유도 UI 표시
if (error?.response?.status === 401) {
  return <LoginPromptUI />;
}
```

---

### 4.3 로그인 페이지 (`/sign-in`)

### 폼 상태 (로컬)

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| `email` 입력값 | UI 상태 | ❌ | ❌ |
| `password` 입력값 | UI 상태 | ❌ | ❌ |
| `emailError` | UI 상태 | ❌ | ❌ |
| `passwordError` | UI 상태 | ❌ | ❌ |
| `isValid` (제출 가능 여부) | 파생 상태 | ❌ | ❌ |
| `isSubmitting` | UI 상태 | ❌ | ❌ |
| `isErrorModalOpen` | UI 상태 | ❌ | ❌ |
| `serverErrorMessage` | UI 상태 | ❌ | ❌ |

### 로그인 성공 결과 (전역으로 전파)

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| 토큰 저장 | 서버 상태 | ✅ | ✅ |
| 로그인 성공 여부 | 파생 상태 | ✅ | ✅ |

**설계 포인트:**

- 로그인 페이지는 **순수 UI 상태** + 성공 시 **전역 인증 상태 갱신**
- `isValid`는 email/password에서 실시간 파생 (별도 상태 불필요)
- React Hook Form 등 폼 라이브러리 사용 시 상태 관리 단순화


```javascript
// isValid 파생 예시
const isValid = useMemo(() => {
  return isValidEmail(email) && isValidPassword(password);
}, [email, password]);
```

---

### 4.4 할 일 목록 (`/task`) - 보호된 페이지

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| `tasks` (페이지별 누적) | 서버 상태 | ❌ | ❌ |
| `currentPage` | UI 상태 | ❌ | ❌ |
| `hasNextPage` | 서버 파생 상태 | ❌ | ❌ |
| `isLoading` (초기) | UI 상태 | ❌ | ❌ |
| `isFetchingNextPage` | UI 상태 | ❌ | ❌ |
| 가상 스크롤 위치 | UI 상태 | ❌ | ❌ |
| `isErrorModalOpen` | UI 상태 | ❌ | ❌ |
| `errorMessage` | UI 상태 | ❌ | ❌ |
| 401 에러 처리 | 전역 로직 | ✅ | - |

**설계 포인트:**

- 목록 데이터를 전역으로 관리할 이유 없음
- **상세 → 목록 이동 시 재조회 허용**이 더 명확하고 단순
- 가상 스크롤 위치는 라이브러리 내부에서 관리 (react-window 등)
- 스크롤 위치 복원은 명세 요구사항 아님
- **401 발생 시 즉시 로그인 페이지로 리다이렉트 (전역 인터셉터)**


```javascript
// 권장 구현: useInfiniteQuery
const {
  data,
  fetchNextPage,
  hasNextPage,
  isFetchingNextPage,
  isLoading,
} = useInfiniteQuery({
  queryKey: ['tasks'],
  queryFn: ({ pageParam = 1 }) => fetchTasks(pageParam),
  getNextPageParam: (lastPage, pages) => /* ... */,
});
```

---

### 4.5 할 일 상세 (`/task/:id`) - 보호된 페이지

### 상세 데이터

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| `task` (상세 데이터) | 서버 상태 | ❌ | ❌ |
| `isLoading` | UI 상태 | ❌ | ❌ |
| 401 에러 처리 | 전역 로직 | ✅ | - |

### 삭제 모달 상태

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
| --- | --- | --- | --- |
| `isDeleteModalOpen` | UI 상태 | ❌ | ❌ |
| `deleteInputValue` | UI 상태 | ❌ | ❌ |
| `isDeleteValid` | 파생 상태 | ❌ | ❌ |

**설계 포인트:**

- 상세 페이지는 **완전히 독립적인 로컬 상태**
- `isDeleteValid`는 `deleteInputValue === task.id`로 파생
- 명세에 DELETE API 없음 → 삭제는 UX 플로우만 구현
- **401 발생 시 즉시 로그인 페이지로 리다이렉트 (전역 인터셉터)**


```javascript
// isDeleteValid 파생
const isDeleteValid = deleteInputValue === task?.id;
```

---

### 4.6 회원정보 (`/user`) - 보호된 페이지

| 상태 | 분류 | 전역 필요 | 페이지 이동 시 유지 |
|:-----|:-----|:----------|:-------------------|
| `user.name` | 서버 상태 | ❌ | ❌ |
| `user.memo` | 서버 상태 | ❌ | ❌ |
| `isLoading` | UI 상태 | ❌ | ❌ |
| 401 에러 처리 | 전역 로직 | ✅ | - |

**설계 포인트:**
- GNB에 사용자 이름 표시 요구사항 없음 → 로컬 상태로 충분
- 필요 시 재조회 비용 낮음
- **401 발생 시 즉시 로그인 페이지로 리다이렉트 (전역 인터셉터)**

---

## 5. 상태 관리 도구 선택 가이드

### 5.1 전역 상태 관리

| 도구 | 장점 | 단점 | 본 프로젝트 적합성 |
|:-----|:-----|:-----|:-------------------|
| **Context API** | React 내장, 추가 의존성 없음 | 복잡한 상태 시 리렌더링 이슈 | ✅ 충분 (인증만) |
| **Zustand** | 간결한 API, 좋은 성능 | 추가 의존성 | ✅ 적합 |
| **Redux** | 강력한 DevTools, 미들웨어 | 보일러플레이트 많음 | ❌ 과도함 |
| **Jotai/Recoil** | 원자적 상태 관리 | 러닝 커브 | ⚠️ 선택적 |

**권장:** Context API 또는 Zustand

### 5.2 서버 상태 관리

| 도구 | 장점 | 단점 | 본 프로젝트 적합성 |
|:-----|:-----|:-----|:-------------------|
| **React Query** | 캐싱, 리페칭, 무한스크롤 지원 | 추가 의존성 | ✅ 강력 권장 |
| **SWR** | 간결함, Next.js 친화적 | 기능 제한적 | ✅ 적합 |
| **직접 구현** | 의존성 없음 | 복잡도 높음 | ⚠️ 비권장 |

**권장:** React Query (무한 스크롤, 에러 처리에 유리)

---

## 6. 데이터 흐름 다이어그램

### 6.1 인증 데이터 흐름
```
┌─────────────────────────────────────────────────────────────┐
│                      인증 데이터 흐름                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [로그인 페이지]                                            │
│       │                                                     │
│       │ POST /api/sign-in                                   │
│       ▼                                                     │
│  ┌─────────┐                                                │
│  │ Server  │                                                │
│  └────┬────┘                                                │
│       │                                                     │
│   ┌───┴───────────────────┐                                 │
│   │                       │                                 │
│   ▼                       ▼                                 │
│ 200 OK                  400 Error                           │
│   │                       │                                 │
│   ▼                       ▼                                 │
│ ┌──────────────┐      [에러 모달]                           │
│ │ AuthStore    │      (로컬 상태)                           │
│ │ (전역 상태)  │                                            │
│ │ - accessToken│                                            │
│ │ - refreshToken                                            │
│ │ - isAuth     │                                            │
│ └──────┬───────┘                                            │
│        │                                                    │
│        │ 토큰 전파                                          │
│        ▼                                                    │
│ ┌──────────────────────────┐                                │
│ │   모든 API 요청 헤더     │                                │
│ │   Authorization: Bearer  │                                │
│ └──────────────────────────┘                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 페이지별 401 처리 흐름 (설계 결정)

```
┌─────────────────────────────────────────────────────────────┐
│               페이지별 401 에러 처리 분기                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [API 401 응답]                                             │
│       │                                                     │
│       ▼                                                     │
│  ┌─────────────────┐                                       │
│  │ 현재 페이지 확인 │                                       │
│  └────────┬────────┘                                       │
│           │                                                 │
│     ┌─────┴─────────────────────┐                          │
│     │                           │                          │
│     ▼                           ▼                          │
│  대시보드 (/)              보호된 페이지                    │
│  (랜딩 페이지)             (/task, /task/:id, /user)       │
│     │                           │                          │
│     ▼                           ▼                          │
│  로그인 유도 UI 표시       경로 저장 후                     │
│  (리다이렉트 없음)         /sign-in 즉시 리다이렉트         │
│     │                           │                          │
│     ▼                           ▼                          │
│  사용자가 직접             로그인 성공 시                   │
│  로그인 버튼 클릭          저장된 경로로 복귀               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.3 대시보드 데이터 흐름 (랜딩 페이지)
```
┌─────────────────────────────────────────────────────────────┐
│                  대시보드 데이터 흐름                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [사용자] ──▶ / 접근                                       │
│       │                                                     │
│       ▼                                                     │
│  ┌─────────────────┐                                       │
│  │ API 호출        │                                       │
│  │ GET /api/dashboard                                      │
│  └────────┬────────┘                                       │
│           │                                                 │
│     ┌─────┴─────────────────┐                              │
│     │                       │                              │
│    200                     401                              │
│     │                       │                              │
│     ▼                       ▼                              │
│  [대시보드 데이터 표시]   [로그인 유도 UI]                  │
│  - numOfTask              - 로그인 버튼/링크               │
│  - numOfRestTask          - 안내 메시지                    │
│  - numOfDoneTask          (리다이렉트 없음)                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.4 보호된 페이지 접근 흐름
```
┌─────────────────────────────────────────────────────────────┐
│                  보호된 페이지 데이터 흐름                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [사용자] ──▶ /task, /task/:id, /user 접근                 │
│       │                                                     │
│       ▼                                                     │
│  ┌─────────────────┐                                       │
│  │ Route Guard     │                                       │
│  │ isAuthenticated?│                                       │
│  └────────┬────────┘                                       │
│           │                                                 │
│     ┌─────┴─────┐                                          │
│     │           │                                          │
│    Yes          No                                          │
│     │           │                                          │
│     ▼           ▼                                          │
│  [API 호출]   [redirectPath 저장]                          │
│     │           │                                          │
│     │           ▼                                          │
│     │        [/sign-in 즉시 리다이렉트]                    │
│     │                                                       │
│  ┌──┴──────────────┐                                       │
│  │    Response     │                                       │
│  ├─────────────────┤                                       │
│  │ 200 → 데이터 표시 (로컬 서버 상태)                      │
│  │ 400 → 에러 모달 (로컬 UI 상태)                          │
│  │ 401 → 전역 로직 → /sign-in 즉시 리다이렉트              │
│  │ 404 → Not Found 렌더링 (로컬 UI 상태)                   │
│  └─────────────────┘                                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.5 무한 스크롤 데이터 흐름
```
┌─────────────────────────────────────────────────────────────┐
│                 무한 스크롤 데이터 흐름                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [/task 페이지 진입]                                       │
│       │                                                     │
│       ▼                                                     │
│  ┌─────────────────────────────────────┐                   │
│  │ useInfiniteQuery('tasks')           │                   │
│  │   └─▶ GET /api/task?page=1          │                   │
│  └────────────────┬────────────────────┘                   │
│                   │                                         │
│                   ▼                                         │
│  ┌─────────────────────────────────────┐                   │
│  │ 가상 스크롤 렌더링                   │                   │
│  │ (뷰포트 내 아이템만 DOM에 존재)      │                   │
│  └────────────────┬────────────────────┘                   │
│                   │                                         │
│                   │ 스크롤 끝 도달 (Intersection Observer)  │
│                   ▼                                         │
│  ┌─────────────────────────────────────┐                   │
│  │ hasNextPage?                        │                   │
│  │   └─▶ fetchNextPage()               │                   │
│  │       └─▶ GET /api/task?page=2      │                   │
│  └────────────────┬────────────────────┘                   │
│                   │                                         │
│                   ▼                                         │
│  ┌─────────────────────────────────────┐                   │
│  │ tasks = [...page1, ...page2, ...]   │                   │
│  │ (페이지 스코프 서버 상태)            │                   │
│  └─────────────────────────────────────┘                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.6 로그인 폼 유효성 검증 흐름
```
┌─────────────────────────────────────────────────────────────┐
│                  로그인 폼 상태 흐름                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [사용자 입력]                                              │
│       │                                                     │
│       ▼                                                     │
│  ┌─────────────────────────────────────┐                   │
│  │ 로컬 UI 상태                        │                   │
│  │ ├─ email: string                    │                   │
│  │ ├─ password: string                 │                   │
│  │ ├─ emailError: string | null        │                   │
│  │ └─ passwordError: string | null     │                   │
│  └────────────────┬────────────────────┘                   │
│                   │                                         │
│                   ▼                                         │
│  ┌─────────────────────────────────────┐                   │
│  │ 파생 상태                           │                   │
│  │ isValid = !emailError &&            │                   │
│  │           !passwordError &&         │                   │
│  │           email && password         │                   │
│  └────────────────┬────────────────────┘                   │
│                   │                                         │
│         ┌────────┴────────┐                                │
│         │                 │                                │
│      isValid          !isValid                             │
│         │                 │                                │
│         ▼                 ▼                                │
│  [버튼 활성화]      [버튼 비활성화]                        │
│  bg=primary         bg=disabled                            │
│         │                                                  │
│         │ 클릭                                             │
│         ▼                                                  │
│  ┌─────────────────┐                                       │
│  │ POST /api/sign-in                                       │
│  └────────┬────────┘                                       │
│           │                                                │
│     ┌─────┴─────┐                                          │
│     │           │                                          │
│   200 OK      400 Error                                    │
│     │           │                                          │
│     ▼           ▼                                          │
│  [전역 상태    [에러 모달]                                 │
│   토큰 저장]   (로컬 UI 상태)                              │
│     │                                                      │
│     ▼                                                      │
│  [리다이렉트]                                              │
│                                                            │
└─────────────────────────────────────────────────────────────┘
```

---

## 7. 상태 요약 매트릭스

### 7.1 페이지별 상태 분류 요약

| 페이지 | 전역 상태 의존 | 서버 상태 | 로컬 UI 상태 | 파생 상태 | 401 처리 |
| --- | --- | --- | --- | --- | --- |
| GNB | `isAuthenticated` | - | - | 활성 메뉴 | - |
| `/sign-in` | `redirectPath` | 로그인 결과 | 폼 입력, 에러, 모달 | `isValid` | - |
| `/` | `isAuthenticated` | dashboard 데이터 | 로딩 | - | **로그인 유도 UI** |
| `/task` | `isAuthenticated` | tasks (무한) | 스크롤, 모달 | `hasNextPage` | **즉시 리다이렉트** |
| `/task/:id` | `isAuthenticated` | task 상세 | 삭제 모달, 입력 | `isDeleteValid` | **즉시 리다이렉트** |
| `/user` | `isAuthenticated` | user 정보 | 로딩 | - | **즉시 리다이렉트** |

### 7.2 상태 유형별 관리 방식 요약

| 유형 | 상태 목록 | 권장 관리 방식 |
| --- | --- | --- |
| **전역 상태** | `accessToken`, `refreshToken`, `isAuthenticated`, `redirectAfterLoginPath` | Context API / Zustand |
| **전역 로직** | 보호된 페이지 401 처리, (선택) 토큰 갱신 | Axios Interceptor / React Query onError |
| **페이지별 로직** | 대시보드 401 처리 | 컴포넌트 내 개별 처리 |
| **서버 상태** | dashboard, tasks, task, user 데이터 | React Query |
| **로컬 UI 상태** | 폼 입력값, 모달 열림/닫힘, 유효성 에러 | useState / React Hook Form |
| **파생 상태** | `isAuthenticated`, `isValid`, `hasNextPage`, `isDeleteValid` | useMemo / 실시간 계산 |

---

## 8. 구현 시 체크리스트

### 8.1 전역 상태

- [ ]  AuthContext 또는 authStore 구현
- [ ]  토큰 저장 위치 결정 (localStorage vs 메모리)
- [ ]  `isAuthenticated` 파생 로직 구현
- [ ]  `redirectAfterLoginPath` 저장/복원 로직 구현

### 8.2 전역 로직

- [ ]  보호된 페이지 401 에러 인터셉터 구현 (대시보드 제외)
- [ ]  (선택) 토큰 자동 갱신 로직 구현

### 8.3 페이지별 로직

- [ ]  대시보드 401 시 로그인 유도 UI 구현

### 8.4 서버 상태

- [ ]  React Query 설정
- [ ]  각 API 엔드포인트별 쿼리 키 정의
- [ ]  무한 스크롤용 `useInfiniteQuery` 구현

### 8.5 로컬 UI 상태

- [ ]  로그인 폼 유효성 검증 구현
- [ ]  삭제 확인 모달 상태 관리
- [ ]  에러 모달 상태 관리
