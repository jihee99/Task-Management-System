# API ëª…ì„¸ì„œ

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| í”„ë¡œì íŠ¸ | í•  ì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ (Task Management System) |
| Base URL | `/api` |
| ì¸ì¦ ë°©ì‹ | JWT Bearer Token |
| ë¬¸ì„œ ë²„ì „ | v1.1 |

---

## 1. í™”ë©´ë³„ API ë§¤í•‘

> ê° í™”ë©´ì—ì„œ í•„ìš”í•œ APIë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ì •ë¦¬í•©ë‹ˆë‹¤.
>

| í™”ë©´ | ë¼ìš°íŠ¸ | ì‚¬ìš© API | ë¹„ê³  |
| --- | --- | --- | --- |
| **ë¡œê·¸ì¸** | `/sign-in` | `POST /api/sign-in` | ë¹„ë¡œê·¸ì¸ ìƒíƒœì—ì„œ ì ‘ê·¼ |
| **ëŒ€ì‹œë³´ë“œ** | `/` | `GET /api/dashboard` | ğŸ’¡ ëœë”© í˜ì´ì§€ (401 ì‹œ ë¡œê·¸ì¸ ìœ ë„ UI) |
| **í•  ì¼ ëª©ë¡** | `/task` | `GET /api/task` | ë³´í˜¸ëœ í˜ì´ì§€ (401 ì‹œ ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸), ë¬´í•œìŠ¤í¬ë¡¤ |
| **í•  ì¼ ìƒì„¸** | `/task/:id` | `GET /api/task/:id`, `DELETE /api/task/:id` | ë³´í˜¸ëœ í˜ì´ì§€ (401 ì‹œ ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸) |
| **íšŒì›ì •ë³´** | `/user` | `GET /api/user` | ë³´í˜¸ëœ í˜ì´ì§€ (401 ì‹œ ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸) |
| **ì „ì—­ (í† í°ê°±ì‹ )** | - | `POST /api/refresh` | AccessToken ë§Œë£Œ ì‹œ |

---

## 2. ì¸ì¦ (Authentication)

### 2.1 ë¡œê·¸ì¸

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `POST /api/sign-in` |
| **ì¸ì¦ í•„ìš”** | âŒ |
| **ìš©ë„** | ì‚¬ìš©ì ë¡œê·¸ì¸ ë° JWT í† í° ë°œê¸‰ |
| **ì‚¬ìš© í™”ë©´** | ë¡œê·¸ì¸ í˜ì´ì§€ (`/sign-in`) |

### Request

**Headers**

```
Content-Type: application/json

```

**Body**

```json
{
  "email": "string",
  "password": "string"
}

```

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ìœ íš¨ì„± ê²€ì¦ |
| --- | --- | --- | --- |
| `email` | string | âœ… | RFC 5322 ì´ë©”ì¼ ê·œì•½ ì¤€ìˆ˜ |
| `password` | string | âœ… | ì˜ë¬¸, í•œê¸€, ìˆ«ì ëª¨ë‘ í¬í•¨, 8~24ì |

### Response

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `{ accessToken, refreshToken }` | ë¡œê·¸ì¸ ì„±ê³µ | í† í° ì €ì¥ â†’ ì›ë˜ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 400 | `{ errorMessage }` | ë¡œê·¸ì¸ ì‹¤íŒ¨ | **ì—ëŸ¬ ëª¨ë‹¬** í‘œì‹œ (errorMessage) |

**Response Body (200)**

```json
{
  "accessToken": "string",   // JWT, decoded: { id: string, exp: timestamp }
  "refreshToken": "string"   // JWT, decoded: { id: string, exp: timestamp }
}

```

**JWT Payload (decoded)**

```json
{
  "id": "string",      // ì‚¬ìš©ì ê³ ìœ  ID
  "exp": 1703980800    // ë§Œë£Œ ì‹œê°„ (Unix timestamp)
}

```

---

### 2.2 í† í° ê°±ì‹ 

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `POST /api/refresh` |
| **ì¸ì¦ í•„ìš”** | âœ… (RefreshToken) |
| **ìš©ë„** | AccessToken ë§Œë£Œ ì‹œ í† í° ì¬ë°œê¸‰ |
| **ì‚¬ìš© í™”ë©´** | ì „ì—­ (Axios Interceptor) |

### Request

**Headers**

```
Authorization: Bearer ${refreshToken}
Content-Type: application/json

```

### Response

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `{ accessToken, refreshToken }` | ê°±ì‹  ì„±ê³µ | ìƒˆ í† í°ìœ¼ë¡œ êµì²´ â†’ ì›ë˜ ìš”ì²­ ì¬ì‹œë„ |
| 400 | `{ errorMessage }` | ê°±ì‹  ì‹¤íŒ¨ | í† í° ì œê±° â†’ `/sign-in` ë¦¬ë‹¤ì´ë ‰íŠ¸ |

**Response Body (200)**

```json
{
  "accessToken": "string",
  "refreshToken": "string"
}

```

---

## 3. ì‚¬ìš©ì (User)

### 3.1 íšŒì›ì •ë³´ ì¡°íšŒ

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `GET /api/user` |
| **ì¸ì¦ í•„ìš”** | âœ… (AccessToken) |
| **ìš©ë„** | ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| **ì‚¬ìš© í™”ë©´** | íšŒì›ì •ë³´ í˜ì´ì§€ (`/user`) |

### Request

**Headers**

```
Authorization: Bearer ${accessToken}

```

### Response

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `{ name, memo }` | ì¡°íšŒ ì„±ê³µ | ì‚¬ìš©ì ì •ë³´ í‘œì‹œ |
| 401 | `{ errorMessage }` | ì¸ì¦ ì‹¤íŒ¨ | ê²½ë¡œ ì €ì¥ â†’ `/sign-in` ë¦¬ë‹¤ì´ë ‰íŠ¸ |

**Response Body (200)**

```json
{
  "name": "string",   // ì‚¬ìš©ì ì´ë¦„
  "memo": "string"    // ì‚¬ìš©ì ë©”ëª¨
}

```

---

## 4. ëŒ€ì‹œë³´ë“œ (Dashboard)

### 4.1 ëŒ€ì‹œë³´ë“œ ì¡°íšŒ

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `GET /api/dashboard` |
| **ì¸ì¦ í•„ìš”** | âœ… (AccessToken) |
| **ìš©ë„** | í•  ì¼ í˜„í™© í†µê³„ ì¡°íšŒ |
| **ì‚¬ìš© í™”ë©´** | ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ (`/`) |

### Request

**Headers**

```
Authorization: Bearer ${accessToken}

```

### Response

> ğŸ’¡ **ì„¤ê³„ ê²°ì •**: ì›ë³¸ ëª…ì„¸ì—ì„œ ëŒ€ì‹œë³´ë“œì˜ 401 ì²˜ë¦¬ê°€ ëª…ì‹œë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ, ëŒ€ì‹œë³´ë“œëŠ” ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë„ ì ‘ê·¼ ê°€ëŠ¥í•œ ëœë”© í˜ì´ì§€ë¡œ í™œìš©í•œë‹¤. 401 ì‘ë‹µ ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ì´ ë¡œê·¸ì¸ ìœ ë„ UIë¥¼ í‘œì‹œí•œë‹¤.

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `{ numOfTask, numOfRestTask, numOfDoneTask }` | ì¡°íšŒ ì„±ê³µ | í†µê³„ ì¹´ë“œ í‘œì‹œ |
| 401 | `{ errorMessage }` | ì¸ì¦ ì‹¤íŒ¨ | ğŸ’¡ **ë¡œê·¸ì¸ ìœ ë„ UI í‘œì‹œ** (ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ìŒ) |

**Response Body (200)**

```json
{
  "numOfTask": 10,       // ì „ì²´ í•  ì¼ ê°œìˆ˜
  "numOfRestTask": 7,    // í•´ì•¼í•  ì¼ ê°œìˆ˜ (status: TODO)
  "numOfDoneTask": 3     // í•œ ì¼ ê°œìˆ˜ (status: DONE)
}

```

**í•„ë“œ ì„¤ëª…**

| í•„ë“œ | íƒ€ì… | ì„¤ëª… | í™”ë©´ í‘œì‹œ |
| --- | --- | --- | --- |
| `numOfTask` | number | ì „ì²´ í•  ì¼ ìˆ˜ | "ì¼" ì¹´ë“œ |
| `numOfRestTask` | number | ë¯¸ì™„ë£Œ í•  ì¼ ìˆ˜ | "í•´ì•¼í•  ì¼" ì¹´ë“œ |
| `numOfDoneTask` | number | ì™„ë£Œ í•  ì¼ ìˆ˜ | "í•œ ì¼" ì¹´ë“œ |

---

## 5. í•  ì¼ (Task)

### 5.1 í•  ì¼ ëª©ë¡ ì¡°íšŒ

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `GET /api/task` |
| **ì¸ì¦ í•„ìš”** | âœ… (AccessToken) |
| **ìš©ë„** | í•  ì¼ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜, ë¬´í•œìŠ¤í¬ë¡¤) |
| **ì‚¬ìš© í™”ë©´** | í•  ì¼ ëª©ë¡ í˜ì´ì§€ (`/task`) |

### Request

**Headers**

```
Authorization: Bearer ${accessToken}

```

**Query Parameters**

| Parameter | Type | í•„ìˆ˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
| --- | --- | --- | --- | --- |
| `page` | number | âŒ | 1 | í˜ì´ì§€ ë²ˆí˜¸ (1ë¶€í„° ì‹œì‘) |

**ì˜ˆì‹œ**

```
GET /api/task?page=1
GET /api/task?page=2

```

### Response

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `[{ id, title, memo, status }]` | ì¡°íšŒ ì„±ê³µ | ì¹´ë“œ ëª©ë¡ ë Œë”ë§ |
| 400 | `{ errorMessage }` | ìš”ì²­ ì˜¤ë¥˜ | **ì—ëŸ¬ ëª¨ë‹¬** (errorMessage + ëª©ë¡ìœ¼ë¡œ ë²„íŠ¼) |
| 401 | `{ errorMessage }` | ì¸ì¦ ì‹¤íŒ¨ | ê²½ë¡œ ì €ì¥ â†’ `/sign-in` ë¦¬ë‹¤ì´ë ‰íŠ¸ |

**Response Body (200)**

> âš ï¸ **ì›ë³¸ ëª…ì„¸ ê¸°ì¤€**: ë°°ì—´ ë‹¨ë… ë°˜í™˜ (meta ê°ì²´ ì—†ìŒ)
>
> ğŸ“Œ **id í•„ë“œ ì¶”ê°€ (ì›ë³¸ ëª…ì„¸ í•´ì„)**:
> - ì›ë³¸ ëª…ì„¸ì—ëŠ” `{ title, memo, status }`ë§Œ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
> - ê·¸ëŸ¬ë‚˜ "í•  ì¼ì„ í´ë¦­ ì‹œ ê° ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™" ìš”êµ¬ì‚¬í•­ê³¼ `GET /api/task/:id` APIì˜ ì¡´ì¬ë¥¼ ê³ ë ¤í•  ë•Œ, ëª©ë¡ API ì‘ë‹µì— `id` í•„ë“œê°€ ë°˜ë“œì‹œ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
> - **ì´ëŠ” ì›ë³¸ ëª…ì„¸ì˜ ì•”ë¬µì  ìš”êµ¬ì‚¬í•­ì„ ëª…ì‹œì ìœ¼ë¡œ í•´ì„í•œ ê²ƒì…ë‹ˆë‹¤.**
> - ë§Œì•½ `id` í•„ë“œ ì—†ì´ êµ¬í˜„í•œë‹¤ë©´, ë°°ì—´ ì¸ë±ìŠ¤ë¥¼ idë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì•ˆì´ ìˆìœ¼ë‚˜, í˜ì´ì§€ë„¤ì´ì…˜ í™˜ê²½ì—ì„œ ì¸ë±ìŠ¤ê°€ ê³ ìœ í•˜ì§€ ì•Šì•„ ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```json
[
  {
    "id": "task-001",
    "title": "í”„ë¡œì íŠ¸ ê¸°íšì„œ ì‘ì„±",
    "memo": "2024ë…„ 1ë¶„ê¸° ëª©í‘œ í¬í•¨",
    "status": "TODO"
  },
  {
    "id": "task-002",
    "title": "íšŒì˜ë¡ ì •ë¦¬",
    "memo": "íŒ€ ë¯¸íŒ… ë‚´ìš© ìš”ì•½",
    "status": "DONE"
  }
]
```

**ë°°ì—´ í•­ëª©**

| í•„ë“œ | íƒ€ì… | ëª…ì„¸ | ì„¤ëª… |
| --- | --- | --- | --- |
| `id` | string | ğŸ” í•´ì„ (í•„ìˆ˜) | ìƒì„¸ í˜ì´ì§€ ì´ë™ìš© (`/task/:id`). ì›ë³¸ ëª…ì„¸ì— ëª…ì‹œë˜ì§€ ì•Šì•˜ìœ¼ë‚˜ ìƒì„¸ ì¡°íšŒ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±ì„ ìœ„í•´ í•„ìˆ˜ |
| `title` | string | âœ… ì›ë³¸ | í•  ì¼ ì œëª© |
| `memo` | string | âœ… ì›ë³¸ | í•  ì¼ ë©”ëª¨ |
| `status` | `"TODO"` \| `"DONE"` | âœ… ì›ë³¸ | ì™„ë£Œ ìƒíƒœ |

**ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„ ê°€ì´ë“œ**

> **ë°°ì—´ ê¸¸ì´**ë¡œ ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.

ğŸ“Œ **í˜ì´ì§€ë„¤ì´ì…˜ ê·œê²© (ì„ì˜ ì •ì˜)**:
| í•­ëª© | ê°’ | ë¹„ê³  |
| --- | --- | --- |
| `PAGE_SIZE` | **20** | í•œ í˜ì´ì§€ë‹¹ ì•„ì´í…œ ìˆ˜ (ì˜ˆì‹œ í™”ë©´ ê¸°ì¤€ ì„ì˜ ì •ì˜) |
| Mock ë°ì´í„° ì´ ê°œìˆ˜ | **47ê°œ** | ë¬´í•œ ìŠ¤í¬ë¡¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ 3í˜ì´ì§€ ë¶„ëŸ‰ (20+20+7) |
| ë§ˆì§€ë§‰ í˜ì´ì§€ íŒë‹¨ | `lastPage.length < PAGE_SIZE` | ì‘ë‹µ ë°°ì—´ ê¸¸ì´ê°€ 20 ë¯¸ë§Œì´ë©´ ë§ˆì§€ë§‰ í˜ì´ì§€ |

> âš ï¸ **ì›ë³¸ ëª…ì„¸ì— í˜ì´ì§€ë‹¹ ì•„ì´í…œ ìˆ˜ê°€ ì •ì˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.(ì„ì˜ë¡œ ì •ì˜)** 

```tsx
const PAGE_SIZE = 20;

const { data, fetchNextPage, hasNextPage } = useInfiniteQuery({
  queryKey: ['tasks'],
  queryFn: ({ pageParam = 1 }) => fetchTasks(pageParam),
  initialPageParam: 1,
  getNextPageParam: (lastPage, allPages) => {
    // ë°°ì—´ ê¸¸ì´ê°€ PAGE_SIZE ë¯¸ë§Œì´ë©´ ë§ˆì§€ë§‰ í˜ì´ì§€
    if (lastPage.length < PAGE_SIZE) {
      return undefined;
    }
    return allPages.length + 1;
  },
});
```

---

### 5.2 í•  ì¼ ìƒì„¸ ì¡°íšŒ

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `GET /api/task/:id` |
| **ì¸ì¦ í•„ìš”** | âœ… (AccessToken) |
| **ìš©ë„** | ê°œë³„ í•  ì¼ ìƒì„¸ ì •ë³´ ì¡°íšŒ |
| **ì‚¬ìš© í™”ë©´** | í•  ì¼ ìƒì„¸ í˜ì´ì§€ (`/task/:id`) |

### Request

**Headers**

```
Authorization: Bearer ${accessToken}

```

**Path Parameters**

| Parameter | Type | ì„¤ëª… |
| --- | --- | --- |
| `id` | string | í•  ì¼ ê³ ìœ  ID |

**ì˜ˆì‹œ**

```
GET /api/task/task-001

```

### Response

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `{ id, title, memo, status, registerDatetime }` | ì¡°íšŒ ì„±ê³µ | ìƒì„¸ ì •ë³´ í‘œì‹œ |
| 401 | `{ errorMessage }` | ì¸ì¦ ì‹¤íŒ¨ | ê²½ë¡œ ì €ì¥ â†’ `/sign-in` ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 404 | `{ errorMessage }` | ì¡´ì¬í•˜ì§€ ì•ŠìŒ | **Not Found í™”ë©´** ë Œë”ë§ |

**Response Body (200)**

```json
{
  "id": "task-001",
  "title": "í”„ë¡œì íŠ¸ ê¸°íšì„œ ì‘ì„±",
  "memo": "2024ë…„ 1ë¶„ê¸° ëª©í‘œ í¬í•¨\n- ë§¤ì¶œ ëª©í‘œ\n- ì‹ ê·œ ê³ ê° ìœ ì¹˜ ì „ëµ",
  "status": "TODO",
  "registerDatetime": "2024-01-15T09:30:00Z"
}

```

**í•„ë“œ ì„¤ëª…**

| í•„ë“œ | íƒ€ì… | ì„¤ëª… | ìš©ë„ |
| --- | --- | --- | --- |
| `id` | string | í•  ì¼ ê³ ìœ  ID | **ì‚­ì œ í™•ì¸ ëª¨ë‹¬**ì—ì„œ ì…ë ¥ê°’ ê²€ì¦ |
| `title` | string | í•  ì¼ ì œëª© | ìƒì„¸ í™”ë©´ í‘œì‹œ |
| `memo` | string | í•  ì¼ ë©”ëª¨ (ê°œí–‰ í¬í•¨ ê°€ëŠ¥) | ìƒì„¸ í™”ë©´ í‘œì‹œ |
| `status` | `"TODO"` | `"DONE"` | ì™„ë£Œ ìƒíƒœ | ìƒíƒœ ë°°ì§€ í‘œì‹œ |
| `registerDatetime` | string (ISO 8601) | ë“±ë¡ ì¼ì‹œ | ë‚ ì§œ í¬ë§·íŒ… í›„ í‘œì‹œ |

---

### 5.3 í•  ì¼ ì‚­ì œ

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| **Endpoint** | `DELETE /api/task/:id` |
| **ì¸ì¦ í•„ìš”** | âœ… (AccessToken) |
| **ìš©ë„** | í•  ì¼ ì‚­ì œ |
| **ì‚¬ìš© í™”ë©´** | í•  ì¼ ìƒì„¸ í˜ì´ì§€ (`/task/:id`) - ì‚­ì œ í™•ì¸ ëª¨ë‹¬ |

### Request

**Headers**

```
Authorization: Bearer ${accessToken}

```

**Path Parameters**

| Parameter | Type | ì„¤ëª… |
| --- | --- | --- |
| `id` | string | ì‚­ì œí•  í•  ì¼ ID |

**ì˜ˆì‹œ**

```
DELETE /api/task/task-001

```

### Response

| Status | Body | ì„¤ëª… | FE ì²˜ë¦¬ |
| --- | --- | --- | --- |
| 200 | `{ message }` | ì‚­ì œ ì„±ê³µ | `/task` ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 401 | `{ errorMessage }` | ì¸ì¦ ì‹¤íŒ¨ | ê²½ë¡œ ì €ì¥ â†’ `/sign-in` ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 404 | `{ errorMessage }` | ì¡´ì¬í•˜ì§€ ì•ŠìŒ | **ì—ëŸ¬ ëª¨ë‹¬** í‘œì‹œ |

**Response Body (200)**

```json
{
  "message": "í•  ì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}

```

**ì‚­ì œ í™•ì¸ ëª¨ë‹¬ UX í”Œë¡œìš°**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ì‚­ì œ ë²„íŠ¼ í´ë¦­]                                           â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  ì‚­ì œ í™•ì¸ ëª¨ë‹¬ í‘œì‹œ                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?                â”‚                  â”‚
â”‚  â”‚                                       â”‚                  â”‚
â”‚  â”‚ ì‚­ì œí•˜ë ¤ë©´ "task-001"ì„ ì…ë ¥í•˜ì„¸ìš”:   â”‚                  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚
â”‚  â”‚ â”‚                                 â”‚   â”‚                  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚
â”‚  â”‚                                       â”‚                  â”‚
â”‚  â”‚ [ì·¨ì†Œ]  [ì‚­ì œ] (ë¹„í™œì„±í™”/í™œì„±í™”)      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€â”€ ì…ë ¥ê°’ !== id â†’ ì‚­ì œ ë²„íŠ¼ ë¹„í™œì„±í™” (bg=disabled)  â”‚
â”‚       â”‚                                                     â”‚
â”‚       â””â”€â”€ ì…ë ¥ê°’ === id â†’ ì‚­ì œ ë²„íŠ¼ í™œì„±í™” (bg=primary)     â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚         DELETE /api/task/:id í˜¸ì¶œ                           â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚         /task ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## 6. API ì „ì²´ ìš”ì•½

| Method | Endpoint | ì¸ì¦ | ì„±ê³µ | ì—ëŸ¬ | FE ì²˜ë¦¬ ìš”ì•½ |
| --- | --- | --- | --- | --- | --- |
| POST | `/api/sign-in` | âŒ | 200 | 400 | 400: ì—ëŸ¬ ëª¨ë‹¬ |
| POST | `/api/refresh` | RefreshToken | 200 | 400 | 400: ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| GET | `/api/user` | AccessToken | 200 | 401 | 401: ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ë³´í˜¸ëœ í˜ì´ì§€) |
| GET | `/api/dashboard` | AccessToken | 200 | 401 | 401: ğŸ’¡ ë¡œê·¸ì¸ ìœ ë„ UI (ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ìŒ) |
| GET | `/api/task` | AccessToken | 200 | 400, 401 | 400: ì—ëŸ¬ ëª¨ë‹¬ / 401: ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| GET | `/api/task/:id` | AccessToken | 200 | 401, 404 | 401: ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ / 404: Not Found |
| DELETE | `/api/task/:id` | AccessToken | 200 | 401, 404 | ì„±ê³µ: ëª©ë¡ ë¦¬ë‹¤ì´ë ‰íŠ¸ |

---

## 7. ê³µí†µ ê·œê²©

### 7.1 ì¸ì¦ í—¤ë” í˜•ì‹

ì¸ì¦ì´ í•„ìš”í•œ ëª¨ë“  API ìš”ì²­ì—ëŠ” ë‹¤ìŒ í—¤ë”ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

```
Authorization: Bearer ${token}

```

| í† í° ì¢…ë¥˜ | ìš©ë„ | ì‚¬ìš© API |
| --- | --- | --- |
| `accessToken` | ì¼ë°˜ API ìš”ì²­ ì¸ì¦ | `/api/user`, `/api/dashboard`, `/api/task`, `/api/task/:id` |
| `refreshToken` | í† í° ê°±ì‹  ìš”ì²­ | `/api/refresh` |

### 7.2 ê³µí†µ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹

ëª¨ë“  ì—ëŸ¬ ì‘ë‹µì€ ë™ì¼í•œ í˜•ì‹ì„ ë”°ë¦…ë‹ˆë‹¤:

```json
{
  "errorMessage": "string"
}

```

### 7.3 ë‚ ì§œ/ì‹œê°„ í˜•ì‹

ëª¨ë“  ë‚ ì§œ/ì‹œê°„ í•„ë“œëŠ” **ISO 8601** í˜•ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```
YYYY-MM-DDTHH:mm:ssZ
ì˜ˆ: 2024-01-15T09:30:00Z

```

---

## 8. ì—ëŸ¬ ì½”ë“œë³„ ì²˜ë¦¬ ì •ì±…

### 8.1 ì²˜ë¦¬ ìš”ì•½

> ğŸ’¡ **ì„¤ê³„ ê²°ì •**: ëŒ€ì‹œë³´ë“œëŠ” ëœë”© í˜ì´ì§€ë¡œ 401 ì‹œ ë¡œê·¸ì¸ ìœ ë„ UIë¥¼ í‘œì‹œí•˜ê³ , ë³´í˜¸ëœ í˜ì´ì§€(`/task`, `/task/:id`, `/user`)ëŠ” 401 ì‹œ ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•œë‹¤.

| Status | ì—ëŸ¬ ìœ í˜• | í˜ì´ì§€ ìœ í˜• | ì²˜ë¦¬ ì£¼ì²´ | FE ì²˜ë¦¬ ì •ì±… |
| --- | --- | --- | --- | --- |
| 400 | Bad Request | ëª¨ë“  í˜ì´ì§€ | í˜ì´ì§€ ë ˆë²¨ | ì—ëŸ¬ ëª¨ë‹¬ í‘œì‹œ (errorMessage) |
| 401 | Unauthorized | ëŒ€ì‹œë³´ë“œ (`/`) | **í˜ì´ì§€ ë ˆë²¨** | ğŸ’¡ ë¡œê·¸ì¸ ìœ ë„ UI í‘œì‹œ (ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ìŒ) |
| 401 | Unauthorized | ë³´í˜¸ëœ í˜ì´ì§€ | **ì „ì—­ ì¸í„°ì…‰í„°** | í† í° ì œê±° â†’ ê²½ë¡œ ì €ì¥ â†’ `/sign-in` ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 404 | Not Found | ëª¨ë“  í˜ì´ì§€ | í˜ì´ì§€ ë ˆë²¨ | Not Found í™”ë©´ ë Œë”ë§ |
| 500 | Server Error | ëª¨ë“  í˜ì´ì§€ | ì „ì—­ ì¸í„°ì…‰í„° | ì„œë¹„ìŠ¤ ì˜¤ë¥˜ ì•ˆë‚´ + ì¬ì‹œë„ ì˜µì…˜ |

### 8.2 401 Unauthorized ìƒì„¸ ì²˜ë¦¬

#### 8.2.1 ëŒ€ì‹œë³´ë“œ 401 ì²˜ë¦¬ (ê°œë³„ ì²˜ë¦¬)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ëŒ€ì‹œë³´ë“œ API 401 ì‘ë‹µ]                                    â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  í˜ì´ì§€ ë ˆë²¨ì—ì„œ ì—ëŸ¬ ìºì¹˜                                  â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  ë¡œê·¸ì¸ ìœ ë„ UI í‘œì‹œ                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ ë¡œê·¸ì¸í•˜ì—¬ í•  ì¼ í˜„í™©ì„ í™•ì¸í•˜ì„¸ìš”    â”‚                  â”‚
â”‚  â”‚                                       â”‚                  â”‚
â”‚  â”‚ [ë¡œê·¸ì¸í•˜ê¸°] ë²„íŠ¼                     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­ ì‹œ /sign-in ì´ë™                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8.2.2 ë³´í˜¸ëœ í˜ì´ì§€ 401 ì²˜ë¦¬ (ì „ì—­ ì¸í„°ì…‰í„°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ë³´í˜¸ëœ í˜ì´ì§€ API 401 ì‘ë‹µ]                               â”‚
â”‚  (/task, /task/:id, /user)                                  â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  1. í† í° ì œê±° (accessToken, refreshToken)                   â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  2. í˜„ì¬ ê²½ë¡œ ì €ì¥ (redirectAfterLoginPath)                 â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  3. /sign-in ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸                                â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  [ë¡œê·¸ì¸ ì„±ê³µ í›„ ì €ì¥ëœ ê²½ë¡œë¡œ ë³µê·€]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬ êµ¬í˜„ ì˜ˆì‹œ

```tsx
// src/api/client.ts
import axios from 'axios';
import { useAuthStore } from '@/stores/authStore';

const api = axios.create({
  baseURL: '/api',
});

// Request Interceptor: í† í° ìë™ ì²¨ë¶€
api.interceptors.request.use((config) => {
  const { accessToken } = useAuthStore.getState();
  if (accessToken) {
    config.headers.Authorization = `Bearer ${accessToken}`;
  }
  return config;
});

// Response Interceptor: ì—ëŸ¬ ì²˜ë¦¬ (ëŒ€ì‹œë³´ë“œ 401 ì œì™¸)
api.interceptors.response.use(
  (response) => response,
  async (error) => {
    const status = error.response?.status;
    const authStore = useAuthStore.getState();
    const currentPath = window.location.pathname;

    if (status === 401) {
      // ğŸ’¡ ëŒ€ì‹œë³´ë“œëŠ” 401 ë¦¬ë‹¤ì´ë ‰íŠ¸ ì œì™¸ (ëœë”© í˜ì´ì§€)
      // í˜ì´ì§€ ë ˆë²¨ì—ì„œ ê°œë³„ ì²˜ë¦¬
      if (currentPath === '/') {
        return Promise.reject(error);
      }
      
      // ë³´í˜¸ëœ í˜ì´ì§€: ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      authStore.setRedirectPath(currentPath);
      authStore.logout();
      window.location.href = '/sign-in';
    }

    return Promise.reject(error);
  }
);

export default api;
```

---

## 9. í™”ë©´ë³„ API ìƒì„¸ ì—°ë™

### 9.1 ë¡œê·¸ì¸ í˜ì´ì§€ (`/sign-in`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë¡œê·¸ì¸ í˜ì´ì§€                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì‚¬ìš© API]                                                 â”‚
â”‚  POST /api/sign-in                                          â”‚
â”‚                                                             â”‚
â”‚  [ë°ì´í„° íë¦„]                                              â”‚
â”‚  1. í¼ ì…ë ¥ (email, password)                               â”‚
â”‚  2. ìœ íš¨ì„± ê²€ì¦ (í”„ë¡ íŠ¸ì—”ë“œ)                                â”‚
â”‚     - email: RFC 5322 ê·œì•½                                  â”‚
â”‚     - password: ì˜ë¬¸/í•œê¸€/ìˆ«ì, 8~24ì                      â”‚
â”‚  3. ê²€ì¦ í†µê³¼ â†’ ì œì¶œ ë²„íŠ¼ í™œì„±í™” (bg=primary)               â”‚
â”‚  4. ê²€ì¦ ì‹¤íŒ¨ â†’ ì œì¶œ ë²„íŠ¼ ë¹„í™œì„±í™” (bg=disabled)            â”‚
â”‚  5. API í˜¸ì¶œ                                                â”‚
â”‚  6. ì„±ê³µ (200) â†’ í† í° ì €ì¥ â†’ redirectPathë¡œ ì´ë™            â”‚
â”‚  7. ì‹¤íŒ¨ (400) â†’ ì—ëŸ¬ ëª¨ë‹¬ í‘œì‹œ                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### 9.2 ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ (`/`) - ëœë”© í˜ì´ì§€

> ğŸ’¡ **ì„¤ê³„ ê²°ì •**: ëŒ€ì‹œë³´ë“œëŠ” ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë„ ì ‘ê·¼ ê°€ëŠ¥í•œ ëœë”© í˜ì´ì§€ ì—­í• ì„ í•œë‹¤. 401 ì‘ë‹µ ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ì´ ë¡œê·¸ì¸ ìœ ë„ UIë¥¼ í‘œì‹œí•œë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ëŒ€ì‹œë³´ë“œ í˜ì´ì§€                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì‚¬ìš© API]                                                 â”‚
â”‚  GET /api/dashboard                                         â”‚
â”‚                                                             â”‚
â”‚  [ë°ì´í„° íë¦„]                                              â”‚
â”‚  1. í˜ì´ì§€ ì§„ì… ì‹œ API í˜¸ì¶œ                                 â”‚
â”‚  2. ì„±ê³µ (200) â†’ 3ê°œ í†µê³„ ì¹´ë“œ ë Œë”ë§                       â”‚
â”‚     - "ì¼": numOfTask                                       â”‚
â”‚     - "í•´ì•¼í•  ì¼": numOfRestTask                            â”‚
â”‚     - "í•œ ì¼": numOfDoneTask                                â”‚
â”‚  3. ì‹¤íŒ¨ (401) â†’ ğŸ’¡ ë¡œê·¸ì¸ ìœ ë„ UI í‘œì‹œ (ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ìŒ)   â”‚
â”‚                                                             â”‚
â”‚  [UI ìƒíƒœ]                                                  â”‚
â”‚  - ë¡œë”©: ìŠ¤ì¼ˆë ˆí†¤ ë˜ëŠ” ìŠ¤í”¼ë„ˆ                               â”‚
â”‚  - ë¡œê·¸ì¸ë¨ + ì„±ê³µ: í†µê³„ ì¹´ë“œ í‘œì‹œ                          â”‚
â”‚  - ë¹„ë¡œê·¸ì¸ (401): ë¡œê·¸ì¸ ìœ ë„ UI í‘œì‹œ                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚    â”‚ ë¡œê·¸ì¸í•˜ì—¬ í•  ì¼ í˜„í™©ì„ í™•ì¸í•˜ì„¸ìš”    â”‚                â”‚
â”‚    â”‚ [ë¡œê·¸ì¸í•˜ê¸°] ë²„íŠ¼                     â”‚                â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### 9.3 í•  ì¼ ëª©ë¡ í˜ì´ì§€ (`/task`) - ë³´í˜¸ëœ í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     í•  ì¼ ëª©ë¡ í˜ì´ì§€                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì‚¬ìš© API]                                                 â”‚
â”‚  GET /api/task?page={n}                                     â”‚
â”‚                                                             â”‚
â”‚  [ë°ì´í„° íë¦„]                                              â”‚
â”‚  1. í˜ì´ì§€ ì§„ì… ì‹œ page=1 í˜¸ì¶œ                              â”‚
â”‚  2. ì„±ê³µ (200) â†’ ì¹´ë“œ ëª©ë¡ ë Œë”ë§ (ê°€ìƒ ìŠ¤í¬ë¡¤ë§)           â”‚
â”‚  3. ìŠ¤í¬ë¡¤ ë ë„ë‹¬ + hasNextPage=true â†’ ë‹¤ìŒ í˜ì´ì§€ í˜¸ì¶œ    â”‚
â”‚  4. hasNextPage=false â†’ ë¬´í•œìŠ¤í¬ë¡¤ ì¢…ë£Œ                     â”‚
â”‚  5. ì¹´ë“œ í´ë¦­ â†’ /task/:id ì´ë™ (id í•„ë“œ ì‚¬ìš©)               â”‚
â”‚                                                             â”‚
â”‚  [ì—ëŸ¬ ì²˜ë¦¬]                                                â”‚
â”‚  - 400 â†’ ì—ëŸ¬ ëª¨ë‹¬ (errorMessage + "ëª©ë¡ìœ¼ë¡œ" ë²„íŠ¼)         â”‚
â”‚  - 401 â†’ ì „ì—­ ì¸í„°ì…‰í„°ê°€ /sign-in ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸           â”‚
â”‚                                                             â”‚
â”‚  [UI ìƒíƒœ]                                                  â”‚
â”‚  - ì´ˆê¸° ë¡œë”©: ìŠ¤ì¼ˆë ˆí†¤ ì¹´ë“œ                                 â”‚
â”‚  - ì¶”ê°€ ë¡œë”©: í•˜ë‹¨ ìŠ¤í”¼ë„ˆ                                   â”‚
â”‚  - ë¹ˆ ë°ì´í„°: "í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### 9.4 í•  ì¼ ìƒì„¸ í˜ì´ì§€ (`/task/:id`) - ë³´í˜¸ëœ í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     í•  ì¼ ìƒì„¸ í˜ì´ì§€                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì‚¬ìš© API]                                                 â”‚
â”‚  GET /api/task/:id (ì¡°íšŒ)                                   â”‚
â”‚  DELETE /api/task/:id (ì‚­ì œ)                                â”‚
â”‚                                                             â”‚
â”‚  [ì¡°íšŒ ë°ì´í„° íë¦„]                                         â”‚
â”‚  1. URLì˜ :idë¡œ API í˜¸ì¶œ                                    â”‚
â”‚  2. ì„±ê³µ (200) â†’ ìƒì„¸ ì •ë³´ ë Œë”ë§                           â”‚
â”‚     - title, memo, status, registerDatetime                 â”‚
â”‚  3. ì‹¤íŒ¨ (401) â†’ ì „ì—­ ì¸í„°ì…‰í„°ê°€ /sign-in ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸   â”‚
â”‚  4. ì‹¤íŒ¨ (404) â†’ Not Found í™”ë©´ ë Œë”ë§                      â”‚
â”‚                                                             â”‚
â”‚  [ì‚­ì œ ë°ì´í„° íë¦„]                                         â”‚
â”‚  1. ì‚­ì œ ë²„íŠ¼ í´ë¦­ â†’ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ í‘œì‹œ                    â”‚
â”‚  2. inputì— id ì…ë ¥                                         â”‚
â”‚  3. ì…ë ¥ê°’ === id â†’ ì œì¶œ ë²„íŠ¼ í™œì„±í™”                        â”‚
â”‚  4. ì œì¶œ í´ë¦­ â†’ DELETE /api/task/:id í˜¸ì¶œ                   â”‚
â”‚  5. ì„±ê³µ (200) â†’ /task ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸                  â”‚
â”‚  6. ì‹¤íŒ¨ (404) â†’ ì—ëŸ¬ ëª¨ë‹¬ í‘œì‹œ                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### 9.5 íšŒì›ì •ë³´ í˜ì´ì§€ (`/user`) - ë³´í˜¸ëœ í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      íšŒì›ì •ë³´ í˜ì´ì§€                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì‚¬ìš© API]                                                 â”‚
â”‚  GET /api/user                                              â”‚
â”‚                                                             â”‚
â”‚  [ë°ì´í„° íë¦„]                                              â”‚
â”‚  1. í˜ì´ì§€ ì§„ì… ì‹œ API í˜¸ì¶œ                                 â”‚
â”‚  2. ì„±ê³µ (200) â†’ ì‚¬ìš©ì ì •ë³´ ë Œë”ë§                         â”‚
â”‚     - name: ì‚¬ìš©ì ì´ë¦„                                     â”‚
â”‚     - memo: ì‚¬ìš©ì ë©”ëª¨                                     â”‚
â”‚  3. ì‹¤íŒ¨ (401) â†’ ì „ì—­ ì¸í„°ì…‰í„°ê°€ /sign-in ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸   â”‚
â”‚                                                             â”‚
â”‚  [UI ìƒíƒœ]                                                  â”‚
â”‚  - ë¡œë”©: ìŠ¤ì¼ˆë ˆí†¤ ë˜ëŠ” ìŠ¤í”¼ë„ˆ                               â”‚
â”‚  - ì„±ê³µ: í”„ë¡œí•„ ì •ë³´ í‘œì‹œ                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## 10. TypeScript íƒ€ì… ì •ì˜

```tsx
// ============================================
// ê³µí†µ íƒ€ì…
// ============================================

/** API ì—ëŸ¬ ì‘ë‹µ */
interface ApiErrorResponse {
  errorMessage: string;
}

// ============================================
// ì¸ì¦ (Authentication)
// ============================================

/** ë¡œê·¸ì¸ ìš”ì²­ */
interface SignInRequest {
  email: string;
  password: string;
}

/** í† í° ì‘ë‹µ (ë¡œê·¸ì¸, í† í°ê°±ì‹  ê³µí†µ) */
interface TokenResponse {
  accessToken: string;
  refreshToken: string;
}

/** JWT Payload (decoded) */
interface JwtPayload {
  id: string;
  exp: number;
}

// ============================================
// ì‚¬ìš©ì (User)
// ============================================

/** íšŒì›ì •ë³´ ì‘ë‹µ */
interface UserResponse {
  name: string;
  memo: string;
}

// ============================================
// ëŒ€ì‹œë³´ë“œ (Dashboard)
// ============================================

/** ëŒ€ì‹œë³´ë“œ ì‘ë‹µ */
interface DashboardResponse {
  numOfTask: number;
  numOfRestTask: number;
  numOfDoneTask: number;
}

// ============================================
// í•  ì¼ (Task)
// ============================================

/** í•  ì¼ ìƒíƒœ */
type TaskStatus = 'TODO' | 'DONE';

/** í•  ì¼ ëª©ë¡ ì•„ì´í…œ */
interface TaskListItem {
  id: string;
  title: string;
  memo: string;
  status: TaskStatus;
}

/** í˜ì´ì§€ë„¤ì´ì…˜ ë©”íƒ€ ì •ë³´ */
interface PaginationMeta {
  currentPage: number;
  totalPages: number;
  totalCount: number;
  hasNextPage: boolean;
}

/** í•  ì¼ ëª©ë¡ ì‘ë‹µ */
interface TaskListResponse {
  data: TaskListItem[];
  meta: PaginationMeta;
}

/** í•  ì¼ ìƒì„¸ ì‘ë‹µ */
interface TaskDetailResponse {
  id: string;
  title: string;
  memo: string;
  status: TaskStatus;
  registerDatetime: string; // ISO 8601
}

/** í•  ì¼ ì‚­ì œ ì‘ë‹µ */
interface TaskDeleteResponse {
  message: string;
}

```

---

## 11. MSW í•¸ë“¤ëŸ¬ ì˜ˆì‹œ

API Mocking êµ¬í˜„ ì‹œ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” MSW í•¸ë“¤ëŸ¬ ì˜ˆì‹œì…ë‹ˆë‹¤.

```tsx
// src/mocks/handlers.ts
import { http, HttpResponse, delay } from 'msw';

export const handlers = [
  // ë¡œê·¸ì¸
  http.post('/api/sign-in', async ({ request }) => {
    await delay(500);
    const body = await request.json();

    if (body.email === 'test@example.com' && body.password === 'password123') {
      return HttpResponse.json({
        accessToken: 'mock-access-token',
        refreshToken: 'mock-refresh-token',
      });
    }

    return HttpResponse.json(
      { errorMessage: 'ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.' },
      { status: 400 }
    );
  }),

  // ëŒ€ì‹œë³´ë“œ
  http.get('/api/dashboard', async ({ request }) => {
    await delay(300);
    const authHeader = request.headers.get('Authorization');

    if (!authHeader?.startsWith('Bearer ')) {
      return HttpResponse.json(
        { errorMessage: 'ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.' },
        { status: 401 }
      );
    }

    return HttpResponse.json({
      numOfTask: 47,
      numOfRestTask: 32,
      numOfDoneTask: 15,
    });
  }),

  // í•  ì¼ ëª©ë¡
  http.get('/api/task', async ({ request }) => {
    await delay(300);
    const url = new URL(request.url);
    const page = Number(url.searchParams.get('page')) || 1;
    const pageSize = 20;
    const totalCount = 47;
    const totalPages = Math.ceil(totalCount / pageSize);

    // Mock ë°ì´í„° ìƒì„±
    const startIndex = (page - 1) * pageSize;
    const data = Array.from({ length: Math.min(pageSize, totalCount - startIndex) }, (_, i) => ({
      id: `task-${String(startIndex + i + 1).padStart(3, '0')}`,
      title: `í•  ì¼ ${startIndex + i + 1}`,
      memo: `í•  ì¼ ${startIndex + i + 1}ì— ëŒ€í•œ ë©”ëª¨ì…ë‹ˆë‹¤.`,
      status: Math.random() > 0.5 ? 'TODO' : 'DONE',
    }));

    return HttpResponse.json({
      data,
      meta: {
        currentPage: page,
        totalPages,
        totalCount,
        hasNextPage: page < totalPages,
      },
    });
  }),

  // í•  ì¼ ìƒì„¸
  http.get('/api/task/:id', async ({ params }) => {
    await delay(200);
    const { id } = params;

    if (id === 'not-found') {
      return HttpResponse.json(
        { errorMessage: 'í•  ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' },
        { status: 404 }
      );
    }

    return HttpResponse.json({
      id,
      title: `í•  ì¼ ìƒì„¸ - ${id}`,
      memo: 'ìƒì„¸ ë©”ëª¨ ë‚´ìš©ì…ë‹ˆë‹¤.\nì—¬ëŸ¬ ì¤„ë¡œ ì‘ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      status: 'TODO',
      registerDatetime: '2024-01-15T09:30:00Z',
    });
  }),

  // í•  ì¼ ì‚­ì œ
  http.delete('/api/task/:id', async ({ params }) => {
    await delay(300);
    const { id } = params;

    if (id === 'not-found') {
      return HttpResponse.json(
        { errorMessage: 'í•  ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' },
        { status: 404 }
      );
    }

    return HttpResponse.json({
      message: 'í•  ì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',
    });
  }),

  // íšŒì›ì •ë³´
  http.get('/api/user', async () => {
    await delay(200);
    return HttpResponse.json({
      name: 'í™ê¸¸ë™',
      memo: 'í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì',
    });
  }),

  // í† í° ê°±ì‹ 
  http.post('/api/refresh', async ({ request }) => {
    await delay(200);
    const authHeader = request.headers.get('Authorization');

    if (!authHeader?.startsWith('Bearer ')) {
      return HttpResponse.json(
        { errorMessage: 'ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤.' },
        { status: 400 }
      );
    }

    return HttpResponse.json({
      accessToken: 'new-mock-access-token',
      refreshToken: 'new-mock-refresh-token',
    });
  }),
];

```

---

## 12. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 12.1 API ì—°ë™ ì²´í¬ë¦¬ìŠ¤íŠ¸

| í™”ë©´ | API | êµ¬í˜„ | ì—ëŸ¬ì²˜ë¦¬ | í…ŒìŠ¤íŠ¸ |
| --- | --- | --- | --- | --- |
| ë¡œê·¸ì¸ | `POST /api/sign-in` | â˜ | â˜ | â˜ |
| ëŒ€ì‹œë³´ë“œ | `GET /api/dashboard` | â˜ | â˜ | â˜ |
| í•  ì¼ ëª©ë¡ | `GET /api/task` | â˜ | â˜ | â˜ |
| í•  ì¼ ìƒì„¸ | `GET /api/task/:id` | â˜ | â˜ | â˜ |
| í•  ì¼ ì‚­ì œ | `DELETE /api/task/:id` | â˜ | â˜ | â˜ |
| íšŒì›ì •ë³´ | `GET /api/user` | â˜ | â˜ | â˜ |
| í† í° ê°±ì‹  | `POST /api/refresh` | â˜ | â˜ | â˜ |

### 12.2 ì—ëŸ¬ ì²˜ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

| ì—ëŸ¬ | í˜ì´ì§€ ìœ í˜• | ì²˜ë¦¬ ì£¼ì²´ | êµ¬í˜„ |
| --- | --- | --- | --- |
| 400 ì—ëŸ¬ ëª¨ë‹¬ | ëª¨ë“  í˜ì´ì§€ | í˜ì´ì§€ ë ˆë²¨ | â˜ |
| 401 ë¡œê·¸ì¸ ìœ ë„ UI | ëŒ€ì‹œë³´ë“œ (`/`) | í˜ì´ì§€ ë ˆë²¨ | â˜ |
| 401 ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ | ë³´í˜¸ëœ í˜ì´ì§€ | ì „ì—­ ì¸í„°ì…‰í„° | â˜ |
| 404 Not Found | í•  ì¼ ìƒì„¸ | í˜ì´ì§€ ë ˆë²¨ | â˜ |
| 500 ì„œë²„ ì˜¤ë¥˜ | ëª¨ë“  í˜ì´ì§€ | ì „ì—­ ì¸í„°ì…‰í„° | â˜ |

### 12.3 ê¸°ëŠ¥ ì²´í¬ë¦¬ìŠ¤íŠ¸

| ê¸°ëŠ¥ | ì—°ê´€ API | êµ¬í˜„ |
| --- | --- | --- |
| ë¬´í•œ ìŠ¤í¬ë¡¤ | `GET /api/task` | â˜ |
| ê°€ìƒ ìŠ¤í¬ë¡¤ë§ | `GET /api/task` | â˜ |
| ì‚­ì œ í™•ì¸ ëª¨ë‹¬ | `DELETE /api/task/:id` | â˜ |
| ë¡œê·¸ì¸ í›„ ì›ë˜ í˜ì´ì§€ ë³µê·€ | `POST /api/sign-in` | â˜ |
| í† í° ìë™ ê°±ì‹  | `POST /api/refresh` | â˜ |
